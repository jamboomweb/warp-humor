#!/bin/sh

# Liste des termes interdits
FORBIDDEN="Warhammer|Space Marine|Imperium|Eldar|Necron|40k|Games Workshop"

echo "üõ°Ô∏è  SCANNING FOR COPYRIGHT INFRINGEMENT (DMCA SHIELD)..."

# Correction : On utilise plusieurs --include pour √™tre s√ªr que grep les prenne tous
# On ajoute -I pour ignorer les fichiers binaires au cas o√π
if grep -rEqI "$FORBIDDEN" \
    --include="*.ts" \
    --include="*.tsx" \
    --include="*.json" \
    --include="*.md" \
    --include="*.txt" \
    --exclude-dir="node_modules" \
    --exclude-dir="dist" \
    --exclude-dir=".git" \
    .; then
    
    echo "‚ùå ERREUR CRITIQUE : Terme interdit d√©tect√© !"
    echo "   La propri√©t√© intellectuelle de Games Workshop a √©t√© trouv√©e."
    echo "   Veuillez remplacer ces termes par leurs √©quivalents parodiques."
    exit 1
fi

echo "‚úÖ Code Clean. Pas d'h√©r√©sie juridique d√©tect√©e."
