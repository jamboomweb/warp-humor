#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Liste des termes interdits (Case insensitive)
FORBIDDEN="Warhammer|Space Marine|Imperium|Eldar|Necron|40k|Games Workshop"

# Recherche des termes dans les fichiers stagi√©s (.ts, .tsx, .json, .md)
# On exclut le dossier .husky et les fichiers de lock
echo "üõ°Ô∏è  SCANNING FOR COPYRIGHT INFRINGEMENT (DMCA SHIELD)..."

if grep -rEwq "$FORBIDDEN" --include=\*.{ts,tsx,json,md} --exclude-dir={node_modules,dist,.git} .; then
    echo "‚ùå ERREUR CRITIQUE : Terme interdit d√©tect√© !"
    echo "   La propri√©t√© intellectuelle de Games Workshop a √©t√© trouv√©e."
    echo "   Veuillez remplacer ces termes par leurs √©quivalents parodiques (ex: 'Space Bros', 'N√©cro-Bots')."
    echo "   (Voir grep output ci-dessus pour localiser l'erreur)"
    exit 1
fi

echo "‚úÖ Code Clean. Pas d'h√©r√©sie juridique d√©tect√©e."
